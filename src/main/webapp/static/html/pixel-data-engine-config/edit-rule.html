<style type="text/css">
    .form-horizontal input.ng-invalid.ng-dirty {
        border-color: #FA787E;
    }

    .form-horizontal input.ng-valid.ng-dirty {
        border-color: #78FA89;
    }
</style>
<div class="view">
    <div class="container">
        <div class="row">
            <header>
                <h3>{{title}}</h3>
            </header>


            <div>
                <table>
                    <tr>
                        <td>key_id:</td>
                        <td>
                            <input type="text" ng-model="ngModelRule.keyId">
                        </td>
                    </tr>
                </table>

                <hr>

                <tr>
                    <td>type:</td>
                    <td>
                        <select ng-model="ngModelRule.type">
                            <option value="transform">transform</option>
                        </select>
                    </td>
                </tr>

                <!--<table>-->
                <!--<tr>-->
                <!--<td>type:</td>-->
                <!--<td>-->
                <!--<input type="text" ng-model="ngModelRule.type">-->
                <!--</td>-->
                <!--</tr>-->
                <!--</table>-->

                <hr>

                <table>
                    <tr>
                        <td>parse_rule:</td>
                        <td>
                            <select ng-model="ngModelRule.parseRule">
                                <option value="orig">orig</option>
                                <option value="split1">split1</option>
                                <option value="split2">split2</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                    </tr>
                    <tr>
                        <table ng-show="ngModelRule.parseRule=='split1'">
                            <td>split string:</td>
                            <td>
                                <input type="text" ng-model="ngModelRule.split1.column1">
                            </td>
                        </table>
                        <table ng-show="ngModelRule.parseRule=='split2'">
                            <tr>
                                <td>level 1 split string:</td>
                                <td>
                                    <input type="text" ng-model="ngModelRule.split2.column1">
                                </td>
                            </tr>
                            <tr>
                                <td>level 2 split string:</td>
                                <td>
                                    <input type="text" ng-model="ngModelRule.split2.column2">
                                </td>
                            </tr>
                        </table>
                    </tr>
                </table>
                <hr>
                <table>
                    <tr>
                        <td>condition_rule:</td>
                        <td>
                            <select ng-model="ngModelRule.conditionRule">
                                <option value="len">len</option>
                                <option value="always">always</option>
                                <option value="range">range</option>
                                <option value="in">in</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <table ng-show="ngModelRule.conditionRule=='len'">
                            <td>string length:</td>
                            <td>
                                <input type="text" ng-model="ngModelRule.len.column1">
                            </td>
                        </table>
                        <table ng-show="ngModelRule.conditionRule=='range'">
                            <tr>
                                <td>range from:</td>
                                <td>
                                    <input type="text" ng-model="ngModelRule.range.column1">
                                </td>
                            </tr>
                            <tr>
                                <td>range to:</td>
                                <td>
                                    <input type="text" ng-model="ngModelRule.range.column2">
                                </td>
                            </tr>
                        </table>
                        <table ng-show="ngModelRule.conditionRule=='in'">
                            <tr ng:repeat="element in ngModelRule.inElementArray">
                                <td>element_{{element.column1}}:</td>
                                <td><input type="text" ng-model="element.column2"></td>
                            </tr>
                            <td>
                            <td>
                                <button type="button" ng-click="addInElement()">+</button>
                            </td>
                            <td>
                                <button type="button" ng-click="removeInElement()">-</button>
                            </td>
                            </td>
                        </table>
                    </tr>
                </table>
                <hr>
                <table>
                    <tr>
                        <td>action_rule:</td>
                        <td>
                            <select ng-model="ngModelRule.actionRule">
                                <option value="substr">substr</option>
                                <option value="set">set</option>
                                <option value="dec">dec</option>
                                <option value="ignore">ignore</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <div>
                            <table ng-show="ngModelRule.actionRule=='substr'">
                                <tr>
                                    <td>direction:</td>
                                    <td>
                                        <input type="text" ng-model="ngModelRule.substr.column1">
                                    </td>
                                </tr>
                                <tr>
                                    <td>start index:</td>
                                    <td>
                                        <input type="text" ng-model="ngModelRule.substr.column2">
                                    </td>
                                </tr>
                                <tr>
                                    <td>length:</td>
                                    <td>
                                        <input type="text" ng-model="ngModelRule.substr.column3">
                                    </td>
                                </tr>
                            </table>
                            <table ng-show="ngModelRule.actionRule=='set'">
                                <tr ng:repeat="set in ngModelRule.setRuleArray">
                                    <td>set_{{set.column1}}:</td>
                                    <td><input type="text" ng-model="set.column2"></td>
                                </tr>
                                <td>
                                <td>
                                    <button type="button" ng-click="addSetRule()">+</button>
                                </td>
                                <td>
                                    <button type="button" ng-click="removeSetRule()">-</button>
                                </td>
                                </td>
                            </table>
                            <table ng-show="ngModelRule.actionRule=='dec'">
                                <td>number of decimals:</td>
                                <td>
                                    <input type="text" ng-model="ngModelRule.dec.column1">
                                </td>
                            </table>
                        </div>
                    </tr>
                </table>
                <hr>

                <div class="form-group">
                    <label class="col-md-2"></label>
                    <div class="col-md-4">
                        <a href="pixel-data-engine-rule" class="btn">Cancel</a>
                        <button ng-click="saveRule(ngModelRule);"
                                ng-disabled="isClean() || myForm.$invalid"
                                class="btn btn-primary">{{buttonText}}
                        </button>
                        <button ng-click="deleteRule(ngModelRule)"
                                ng-show="ngModelRule._id" class="btn btn-warning">Delete
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
